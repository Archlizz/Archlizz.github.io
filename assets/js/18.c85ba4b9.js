(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{588:function(a,s,t){"use strict";t.r(s);var n=t(1),r=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"fox3-0-app打包指南-android"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fox3-0-app打包指南-android"}},[a._v("#")]),a._v(" Fox3.0 APP打包指南(Android)")]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#初始版本包说明"}},[a._v("初始版本包说明")]),t("ul",[t("li",[t("a",{attrs:{href:"#configuration"}},[a._v("configuration")])]),t("li",[t("a",{attrs:{href:"#workspace"}},[a._v("workspace")])])])]),t("li",[t("a",{attrs:{href:"#初始版本包打包"}},[a._v("初始版本包打包")]),t("ul",[t("li",[t("a",{attrs:{href:"#步骤一"}},[a._v("步骤一")])]),t("li",[t("a",{attrs:{href:"#步骤二"}},[a._v("步骤二")])]),t("li",[t("a",{attrs:{href:"#步骤三"}},[a._v("步骤三")])])])]),t("li",[t("a",{attrs:{href:"#app打包"}},[a._v("APP打包")]),t("ul",[t("li",[t("a",{attrs:{href:"#步骤一"}},[a._v("步骤一")])]),t("li",[t("a",{attrs:{href:"#步骤二"}},[a._v("步骤二")])]),t("li",[t("a",{attrs:{href:"#步骤三"}},[a._v("步骤三")])])])]),t("li",[t("a",{attrs:{href:"#多渠道打包说明"}},[a._v("多渠道打包说明")])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"初始版本包说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始版本包说明"}},[a._v("#")]),a._v(" 初始版本包说明")]),a._v(" "),t("p",[a._v("初始版本包是用于在安装app后，第一次打开APP后解压的资源。如下图所示，版本包中一般包含两个文件夹：\n"),t("img",{attrs:{src:"http://static.zybuluo.com/jiangch316/t8oedjitsasbnqsb3me871ex/version_architecture.png",alt:"version_architecture.png-68.1kB"}})]),a._v(" "),t("h3",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[a._v("#")]),a._v(" configuration")]),a._v(" "),t("p",[a._v("放置配置文件，其中client.properties是主要的配置文件,配置说明如下")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("    #主工程")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("    web/mainApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("fox")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("    #设备回退键触发事件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("    web/backAction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("javascript:fox.custom.logout()")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("    #是否启用更新")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("    version/updateEnabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("    #版本服务器地址,可支持列表，以‘,’分割")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("    version/address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("http://192.144.128.218:9291")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("    #版本服务器更新策略，选项问：fore：必须更新完成后才能进入，options:可选")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("    version/updatePolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("options")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br")])]),t("h3",{attrs:{id:"workspace"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#workspace"}},[a._v("#")]),a._v(" workspace")]),a._v(" "),t("p",[a._v("放置web资源，内部结构如下")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("main_app")]),a._v(" 主工程(名称可改)，必须与client.properties中得入口APP名保持一致")]),a._v(" "),t("li",[t("strong",[a._v("h5_apps")]),a._v(" 子工程目录，可多个目录名和应用名一致")]),a._v(" "),t("li",[t("strong",[a._v("cdn")]),a._v(" 公共JS、CSS库目录，是平台CND路径的本地缓存目录")])]),a._v(" "),t("blockquote",[t("p",[a._v("PS：初始版本包的示例一般会在源代码包的version文件夹下")])]),a._v(" "),t("h2",{attrs:{id:"初始版本包打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始版本包打包"}},[a._v("#")]),a._v(" 初始版本包打包")]),a._v(" "),t("p",[a._v("初始版本包打包有两种方式，分别为"),t("strong",[a._v("在线打包")]),a._v("和"),t("strong",[a._v("手工打包")]),a._v("，下面我只介绍手工打包。")]),a._v(" "),t("h3",{attrs:{id:"步骤一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤一"}},[a._v("#")]),a._v(" 步骤一")]),a._v(" "),t("p",[a._v("选中workspace和configuration目录，并使用"),t("strong",[a._v("zip")]),a._v("方式压缩这两个目录，"),t("strong",[a._v("切记这两个目录是是顶层目录，他们是不允许有父亲目录的")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"步骤二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤二"}},[a._v("#")]),a._v(" 步骤二")]),a._v(" "),t("p",[a._v("把步骤一产生的压缩包，改名app对应的包名，包名可以在android工程中的app模块中的build.gradle文件获取\n"),t("img",{attrs:{src:"http://static.zybuluo.com/jiangch316/t16237ru5h6j4dgm5m8u6qai/package_name.png",alt:"package_name.png-198.1kB"}})]),a._v(" "),t("h3",{attrs:{id:"步骤三"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤三"}},[a._v("#")]),a._v(" 步骤三")]),a._v(" "),t("p",[a._v("把初始版本包压缩包，放入android工程中app模块下assets/version目录下。\n"),t("img",{attrs:{src:"http://static.zybuluo.com/jiangch316/9pclrurat4ive4taas31sf55/version_place.jpg",alt:"version_place.jpg-55.1kB"}})]),a._v(" "),t("h2",{attrs:{id:"app打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#app打包"}},[a._v("#")]),a._v(" APP打包")]),a._v(" "),t("p",[a._v("APP打包需要使用android studio，请预先准备环境。")]),a._v(" "),t("h3",{attrs:{id:"步骤一-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-2"}},[a._v("#")]),a._v(" 步骤一")]),a._v(" "),t("p",[a._v("选择android studio顶部菜单Build->Generate Signed Bundle/APK，并打开向导选择APK，点击next\n"),t("img",{attrs:{src:"http://static.zybuluo.com/jiangch316/aelpdj47yw3vgggqkt1fmo6y/build_step_1.jpg",alt:"build_step_1.jpg-168.7kB"}})]),a._v(" "),t("h3",{attrs:{id:"步骤二-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-2"}},[a._v("#")]),a._v(" 步骤二")]),a._v(" "),t("p",[a._v("选择已有的签名文件或创建新签名文件，点击next\n"),t("img",{attrs:{src:"http://static.zybuluo.com/jiangch316/h6eds20w50c8mhnvoxbr8aa1/build_step_2.jpg",alt:"build_step_2.jpg-168.3kB"}})]),a._v(" "),t("h3",{attrs:{id:"步骤三-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-2"}},[a._v("#")]),a._v(" 步骤三")]),a._v(" "),t("p",[a._v("选择需要打包的package，并勾上签名版本，点击finish，打包完成后IDE会弹出提示，并提示apk所在目录。\n"),t("img",{attrs:{src:"http://static.zybuluo.com/jiangch316/bsvw54384xt1kp6yq1ubc9p3/build_step_3.jpg",alt:"build_step_3.jpg-101kB"}})]),a._v(" "),t("h2",{attrs:{id:"多渠道打包说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多渠道打包说明"}},[a._v("#")]),a._v(" 多渠道打包说明")]),a._v(" "),t("p",[a._v("在我们开发过程中，通常需要打包几个APK，如开发、UAT和生产。如果同时三份代码，那么维护就比较麻烦了。多渠道打包的办法就能很好的解决这个问题。具体的办法是在app模块中的build.gradle文件中的productFlavors节点中添加配置，如下分别有pad_demo和phone_demo两个flavor，我们在打包的过程中选择所需的flavor进行打包即可。")]),a._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[a._v("    productFlavors "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        pad_demo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            applicationId "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fox.app.pad"')]),a._v("\n            versionCode "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n            versionName "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.0.0"')]),a._v("\n            minSdkVersion "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v("\n            targetSdkVersion "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v("\n            manifestPlaceholders = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"移动平台(PAD)"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" icon"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@mipmap/ic_launcher_fox"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("bdkey"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ixVXFlhEFLSAXtA2IVeNF0CNw2chONRQ"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("screenOrientation"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"landscape"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n            ndk "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                abiFilters  'armeabi-v"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("a'\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            dimension "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"channel"')]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n        phone_demo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            applicationId "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fox.app.phone"')]),a._v("\n            versionCode "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n            versionName "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.0.1"')]),a._v("\n            minSdkVersion "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v("\n            targetSdkVersion "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v("\n            manifestPlaceholders = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"移动平台"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" icon"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"@mipmap/ic_launcher_fox"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("bdkey"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ixVXFlhEFLSAXtA2IVeNF0CNw2chONRQ"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("screenOrientation"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"portrait"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n            ndk "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                abiFilters  'armeabi-v"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v("a'\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            dimension "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"channel"')]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);