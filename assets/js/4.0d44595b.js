(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{538:function(s,a,t){s.exports=t.p+"assets/img/version_architecture.642356e0.png"},539:function(s,a,t){s.exports=t.p+"assets/img/package_name.60ec1cf1.png"},540:function(s,a,t){s.exports=t.p+"assets/img/version_place.7088d96e.jpg"},541:function(s,a,t){s.exports=t.p+"assets/img/build_step_1.b6dd3e23.jpg"},542:function(s,a,t){s.exports=t.p+"assets/img/build_step_2.5bb20cb8.jpg"},543:function(s,a,t){s.exports=t.p+"assets/img/build_step_3.f5ff4d43.jpg"},617:function(s,a,t){"use strict";t.r(a);var n=t(1),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"fox2-0-app打包指南"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fox2-0-app打包指南"}},[s._v("#")]),s._v(" Fox2.0 APP打包指南")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"初始版本包说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始版本包说明"}},[s._v("#")]),s._v(" 初始版本包说明")]),s._v(" "),n("p",[s._v("初始版本包是用于在安装app后，第一次打开APP后解压的资源。如下图所示，版本包中一般包含两个文件夹：\n"),n("img",{attrs:{src:t(538),alt:"version目录"}})]),s._v(" "),n("h3",{attrs:{id:"configuration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[s._v("#")]),s._v(" configuration")]),s._v(" "),n("p",[s._v("放置配置文件，其中client.properties是主要的配置文件,配置说明如下")]),s._v(" "),n("div",{staticClass:"language-properties line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-properties"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("    #入口页面路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("    web/startUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("workspace/fox/index.html")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("    #设备回退键触发事件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("    web/backAction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("javascript:fox.custom.logout()")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("    #是否启用更新")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("    version/updateEnabled")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("false")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("    #版本服务器地址,可支持列表，以‘,’分割")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("    version/address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("http://192.144.128.218:9291")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("    #版本服务器更新策略，选项问：fore：必须更新完成后才能进入，options:可选")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("    version/updatePolicy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("options")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h3",{attrs:{id:"workspace"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#workspace"}},[s._v("#")]),s._v(" workspace")]),s._v(" "),n("p",[s._v("放置web资源，内部结构如下")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("main_app")]),s._v(" 主工程(名称可改)，必须与client.properties中得入口页面路径保持一致")]),s._v(" "),n("li",[n("strong",[s._v("h5_apps")]),s._v(" 子工程目录(名称不可修改)，该目录下面放置对应的h5应用资源")]),s._v(" "),n("li",[n("strong",[s._v("cdn")]),s._v(" 公共JS、CSS库目录，是平台CND路径的本地缓存目录")])]),s._v(" "),n("blockquote",[n("p",[s._v("PS：初始版本包的示例一般会在源代码包的version文件夹下")])]),s._v(" "),n("h2",{attrs:{id:"初始版本包打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始版本包打包"}},[s._v("#")]),s._v(" 初始版本包打包")]),s._v(" "),n("p",[s._v("初始版本包打包有两种方式，分别为"),n("strong",[s._v("在线打包")]),s._v("和"),n("strong",[s._v("手工打包")]),s._v("，下面我只介绍手工打包。")]),s._v(" "),n("h3",{attrs:{id:"步骤一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤一"}},[s._v("#")]),s._v(" 步骤一")]),s._v(" "),n("p",[s._v("选中workspace和configuration目录，并使用"),n("strong",[s._v("zip")]),s._v("方式压缩这两个目录，"),n("strong",[s._v("切记这两个目录是是顶层目录，他们是不允许有父亲目录的")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"步骤二"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤二"}},[s._v("#")]),s._v(" 步骤二")]),s._v(" "),n("p",[s._v("把步骤一产生的压缩包，改名app对应的包名，包名可以在android工程中的app模块中的build.gradle文件获取\n"),n("img",{attrs:{src:t(539),alt:"包名"}})]),s._v(" "),n("h3",{attrs:{id:"步骤三"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤三"}},[s._v("#")]),s._v(" 步骤三")]),s._v(" "),n("p",[s._v("把初始版本包压缩包，放入android工程中app模块下assets/version目录下。\n"),n("img",{attrs:{src:t(540),alt:"包位置"}})]),s._v(" "),n("h2",{attrs:{id:"app打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#app打包"}},[s._v("#")]),s._v(" APP打包")]),s._v(" "),n("p",[s._v("APP打包需要使用android studio，请预先准备环境。")]),s._v(" "),n("h3",{attrs:{id:"步骤一-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-2"}},[s._v("#")]),s._v(" 步骤一")]),s._v(" "),n("p",[s._v("选择android studio顶部菜单Build->Generate Signed Bundle/APK，并打开向导选择APK，点击next\n"),n("img",{attrs:{src:t(541),alt:"向导一"}})]),s._v(" "),n("h3",{attrs:{id:"步骤二-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-2"}},[s._v("#")]),s._v(" 步骤二")]),s._v(" "),n("p",[s._v("选择已有的签名文件或创建新签名文件，点击next\n"),n("img",{attrs:{src:t(542),alt:"向导2"}})]),s._v(" "),n("h3",{attrs:{id:"步骤三-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-2"}},[s._v("#")]),s._v(" 步骤三")]),s._v(" "),n("p",[s._v("选择需要打包的package，并勾上签名版本，点击finish，打包完成后IDE会弹出提示，并提示apk所在目录。")]),s._v(" "),n("p",[n("img",{attrs:{src:t(543),alt:"向导3"}})]),s._v(" "),n("h2",{attrs:{id:"多渠道打包说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多渠道打包说明"}},[s._v("#")]),s._v(" 多渠道打包说明")]),s._v(" "),n("p",[s._v("在我们开发过程中，通常需要打包几个APK，如开发、UAT和生产。如果同时三份代码，那么维护就比较麻烦了。多渠道打包的办法就能很好的解决这个问题。具体的办法是在app模块中的build.gradle文件中的productFlavors节点中添加配置，如下分别有pad_demo和phone_demo两个flavor，我们在打包的过程中选择所需的flavor进行打包即可。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("    productFlavors "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        pad_demo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            applicationId "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fox.app.pad"')]),s._v("\n            versionCode "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n            versionName "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v("\n            minSdkVersion "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("\n            targetSdkVersion "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n            manifestPlaceholders = "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"移动平台(PAD)"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@mipmap/ic_launcher_fox"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("bdkey"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ixVXFlhEFLSAXtA2IVeNF0CNw2chONRQ"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("screenOrientation"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"landscape"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            ndk "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                abiFilters  'armeabi-v"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("a'\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            flavorDimensions "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"versionCode"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        phone_demo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            applicationId "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fox.app.phone"')]),s._v("\n            versionCode "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n            versionName "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.1"')]),s._v("\n            minSdkVersion "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("\n            targetSdkVersion "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n            manifestPlaceholders = "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("app_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"移动平台"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@mipmap/ic_launcher_fox"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("bdkey"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ixVXFlhEFLSAXtA2IVeNF0CNw2chONRQ"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("screenOrientation"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"portrait"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            ndk "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                abiFilters  'armeabi-v"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("a'\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            flavorDimensions "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"versionCode"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);